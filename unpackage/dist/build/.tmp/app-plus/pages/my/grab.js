(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/grab"],{"084d":function(t,e,a){"use strict";a.r(e);var n=a("bb45"),i=a("df0f");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("f79a");var s=a("2877"),c=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},"08e2":function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return a.e("components/uni-countdown/uni-countdown").then(a.bind(null,"5d79"))},o={components:{uniCountDown:i},data:function(){return{grab:[],images:[],time_up:!1,remitter:"",image_uploading:!1}},onShow:function(){this.getGrab()},methods:{timeup:function(){this.time_up=!0,t.showToast({title:"已自动取消",image:"../../static/icons/warning.png"}),console.log(n("时间到"," at pages/my/grab.vue:104"))},copy:function(e){t.setClipboardData({data:e,success:function(){console.log(n("success"," at pages/my/grab.vue:111"))}})},getGrab:function(){var e=this,a=this.getGlobalAccessToken();null!=a&&t.request({url:this.serverUrl+"grab",header:{Authorization:a,Accept:"application/json"},method:"GET",success:function(a){200==a.data.code?e.grab=a.data.data:422==a.data.code?t.showModal({title:"等待对方确认",content:a.data.message,showCancel:!0,success:function(e){e.confirm&&t.navigateTo({url:"../my/myTransaction"})}}):429==a.data.code?t.showToast({title:a.data.message,image:"../../static/icons/warning.png"}):t.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(e){e.confirm&&t.reLaunch({url:"../registLogin/registLogin"})}})}})},removeImage:function(e){var a=this;t.showModal({title:"删除",content:"确定删除图片？",showCancel:!0,confirmText:"确定",success:function(t){t.confirm?a.images.splice(e,1):t.cancel&&console.log(n("用户点击取消"," at pages/my/grab.vue:178"))}})},uploadImage:function(){var e=this;this.time_up?t.showToast({title:"已自动取消",image:"../../static/icons/warning.png"}):t.chooseImage({success:function(a){var i=a.tempFilePaths,o=e.getGlobalAccessToken();e.image_uploading=!0,t.showLoading({title:"图片上传中"}),t.uploadFile({url:e.serverUrl+"upload",filePath:i[0],name:"file",header:{Authorization:o,Accept:"application/json"},formData:{type:"1"},success:function(a){var i=JSON.parse(a.data);console.log(n(i.data," at pages/my/grab.vue:213")),e.images.push(i.data),setTimeout(function(){t.hideLoading()},500),e.image_uploading=!1}})}})},submit:function(){var e=this;if(this.image_uploading)t.showToast({title:"图片未上传完成",image:"../../static/icons/success.png"});else if(this.time_up)t.showToast({title:"已自动取消",image:"../../static/icons/warning.png"});else{var a=this.getGlobalAccessToken(),n=this,i=n.serverUrl;t.request({url:i+"save-grab",header:{Authorization:a,Accept:"application/json"},data:{id:n.grab.id,remitter:n.remitter,images:n.images},method:"POST",success:function(a){200==a.data.code?(e.images=[],e.grab=[],t.showToast({title:a.data.message,image:"../../static/icons/success.png"}),setTimeout(function(){t.navigateTo({url:"../my/myTransaction"})},1e3)):422==a.data.code&&t.showToast({title:a.data.message,image:"../../static/icons/warning.png"})}})}}}};e.default=o}).call(this,a("6e42")["default"],a("0de9")["default"])},"2f27":function(t,e,a){},a157:function(t,e,a){"use strict";(function(t){a("d058"),a("921b");n(a("66fd"));var e=n(a("084d"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},bb45:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=(t._self._c,t.grab.time_out_at.substr(0,10));t.$mp.data=Object.assign({},{$root:{g0:a}})},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},df0f:function(t,e,a){"use strict";a.r(e);var n=a("08e2"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},f79a:function(t,e,a){"use strict";var n=a("2f27"),i=a.n(n);i.a}},[["a157","common/runtime","common/vendor"]]]);