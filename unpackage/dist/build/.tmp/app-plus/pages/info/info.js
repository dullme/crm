(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/info/info"],{"96e5":function(t,e,i){"use strict";i.r(e);var n=i("a52f"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=a.a},"97c2":function(t,e,i){"use strict";i.r(e);var n=i("f649"),a=i("96e5");for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);i("d16b");var o=i("2877"),r=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},a52f:function(t,e,i){"use strict";(function(t){function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){var t=this.getDate({format:!0});return{token:"",id:"",customerInfo:i({name:"",industry:"",mobile:"",website:"",date:t,time:"12:00",address:"",level:0,source:0},"industry",0),level:["请选择","A级","B级","C级"],source:[],industry:[],status_name:["待拜访","已结束"]}},onLoad:function(e){var i=this;this.token=this.getGlobalAccessToken(),this.id=e.id,t.request({url:this.serverUrl+"customer-industry-and-source",header:{Authorization:this.token,Accept:"application/json"},method:"GET",success:function(e){if(200==e.data.code){for(var n in e.data.data.source)i.source.push(e.data.data.source[n]);for(var a in e.data.data.industry)i.industry.push(e.data.data.industry[a])}else t.showToast({title:e.data.message,image:"../../static/icons/warning.png"})}}),this.id&&t.request({url:this.serverUrl+"customer-info/"+this.id,header:{Authorization:this.token,Accept:"application/json"},method:"GET",success:function(e){200==e.data.code?i.customerInfo=e.data.data:t.showToast({title:e.data.message,image:"../../static/icons/warning.png"})}})},methods:{levelSelect:function(t){this.customerInfo.level=t.detail.value},industrySelect:function(t){this.customerInfo.industry=t.detail.value},sourceSelect:function(t){this.customerInfo.source=t.detail.value},bindDateChange:function(t){this.customerInfo.date=t.detail.value},bindTimeChange:function(t){this.customerInfo.time=t.detail.value},formSubmit:function(){var e=this;if(0==this.customerInfo.level)t.showToast({title:"请选择客户级别",image:"../../static/icons/warning.png"});else if(0==this.customerInfo.industry)t.showToast({title:"请选择客户行业",image:"../../static/icons/warning.png"});else if(0==this.customerInfo.source)t.showToast({title:"请选择客户来源",image:"../../static/icons/warning.png"});else if(""==this.customerInfo.name)t.showToast({title:"请输入客户名称",image:"../../static/icons/warning.png"});else if(""==this.customerInfo.mobile)t.showToast({title:"请输入电话号码",image:"../../static/icons/warning.png"});else{var n=this.id?this.id:"";t.showLoading({title:"加载中"}),t.request({url:this.serverUrl+"customer/"+n,header:{Authorization:this.token,Accept:"application/json"},data:this.customerInfo,method:"POST",success:function(n){if(t.hideLoading(),200==n.data.code){var a="更新成功";e.id||(a="保存成功",e.customerInfo=i({name:"",industry:"",mobile:"",website:"",date:e.getDate({format:!0}),time:"12:00",address:"",level:0,source:0},"industry",0)),t.showToast({title:a,image:"../../static/icons/success.png"})}else 422==n.data.code?t.showToast({title:n.data.message,image:"../../static/icons/warning.png"}):429==n.data.code?t.showToast({title:n.data.message,image:"../../static/icons/warning.png"}):t.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(e){e.confirm&&t.reLaunch({url:"../registLogin/registLogin"})}})}})}},getDate:function(t){var e=new Date,i=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return"start"===t?i-=60:"end"===t&&(i+=2),n=n>9?n:"0"+n,a=a>9?a:"0"+a,"".concat(i,"-").concat(n,"-").concat(a)}}};e.default=n}).call(this,i("6e42")["default"])},a9e5:function(t,e,i){},d16b:function(t,e,i){"use strict";var n=i("a9e5"),a=i.n(n);a.a},f649:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})}},[["6df7","common/runtime","common/vendor"]]]);