(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/follow/follow"],{"1b68":function(t,e,a){},"78ce":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return i})},aea6:function(t,e,a){"use strict";var o=a("1b68"),i=a.n(o);i.a},b1fd:function(t,e,a){"use strict";a.r(e);var o=a("78ce"),i=a("e06f");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("aea6");var s=a("2877"),c=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=c.exports},c265:function(t,e,a){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){var t=this.getDate({format:!0});return{token:"",id:"",name:"",mobile:"",user_name:"",status:"",type:["请选择","微信","电话","邮件"],status_name:["待拜访","已结束"],type_index:0,date:t,time:"12:00",remark:"",follow_list:{},customer:{},order:1}},onLoad:function(t){this.token=this.getGlobalAccessToken(),this.id=t.id,this.name=t.name,this.mobile=t.mobile,this.user_name=t.user_name,this.status=t.status,null!=this.token&&this.searchFollow()},methods:{typeSelect:function(t){this.type_index=t.detail.value},bindDateChange:function(t){this.date=t.detail.value},bindTimeChange:function(t){this.time=t.detail.value},customerEnd:function(){var e=this;1!=this.customer&&t.showModal({title:"结束拜访",content:"结束拜访后无法再次开启",showCancel:!0,confirmText:"确定",success:function(o){o.confirm?(console.log(a("用户点击确定"," at pages/follow/follow.vue:166")),t.showLoading({title:"加载中"}),t.request({url:e.serverUrl+"customer-end/"+e.id,header:{Authorization:e.token,Accept:"application/json"},method:"GET",success:function(a){t.hideLoading(),200==a.data.code?(e.customer.status=1,t.showToast({title:"已结束",image:"../../static/icons/success.png"})):422==a.data.code?t.showToast({title:a.data.message,image:"../../static/icons/warning.png"}):429==a.data.code?t.showToast({title:a.data.message,image:"../../static/icons/warning.png"}):t.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(e){e.confirm&&t.reLaunch({url:"../registLogin/registLogin"})}})}})):o.cancel&&console.log(a("用户点击取消"," at pages/follow/follow.vue:214"))}})},orderBy:function(){this.order=this.order?0:1,this.searchFollow()},searchFollow:function(){var e=this;t.request({url:this.serverUrl+"follow-list/"+this.id+"/"+this.order,header:{Authorization:this.token,Accept:"application/json"},method:"GET",success:function(a){200==a.data.code?(e.follow_list=a.data.data.follows,e.customer=a.data.data.customer):422==a.data.code?t.showToast({title:a.data.message,image:"../../static/icons/warning.png"}):429==a.data.code?t.showToast({title:a.data.message,image:"../../static/icons/warning.png"}):t.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(e){e.confirm&&t.reLaunch({url:"../registLogin/registLogin"})}})}})},formSubmit:function(){var e=this;0==this.type_index?t.showToast({title:"请选择类型",image:"../../static/icons/warning.png"}):(t.showLoading({title:"加载中"}),t.request({url:this.serverUrl+"follow",header:{Authorization:this.token,Accept:"application/json"},data:{customer_id:this.id,type:this.type_index,date:this.date,time:this.time,remark:this.remark,order:this.order},method:"POST",success:function(a){t.hideLoading(),200==a.data.code?(e.follow_list.unshift(a.data.data),e.type_index=0,t.showToast({title:"保存成功",image:"../../static/icons/success.png"})):422==a.data.code?t.showToast({title:a.data.message,image:"../../static/icons/warning.png"}):429==a.data.code?t.showToast({title:a.data.message,image:"../../static/icons/warning.png"}):t.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(e){e.confirm&&t.reLaunch({url:"../registLogin/registLogin"})}})}}))},getDate:function(t){var e=new Date,a=e.getFullYear(),o=e.getMonth()+1,i=e.getDate();return"start"===t?a-=60:"end"===t&&(a+=2),o=o>9?o:"0"+o,i=i>9?i:"0"+i,"".concat(a,"-").concat(o,"-").concat(i)}}};e.default=o}).call(this,a("6e42")["default"],a("0de9")["default"])},e06f:function(t,e,a){"use strict";a.r(e);var o=a("c265"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);e["default"]=i.a}},[["a974","common/runtime","common/vendor"]]]);