(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-follow-follow"],{"05ba":function(t,i,e){var a=e("757f");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("cd0193d0",a,!0,{sourceMap:!1,shadowMode:!1})},"426e":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("7f7f");var a={data:function(){var t=this.getDate({format:!0});return{token:"",id:"",name:"",mobile:"",user_name:"",status:"",type:[],status_name:["待拜访","已结束"],type_index:0,date:t,time:"12:00",remark:"",follow_list:{},customer:{},order:1}},onLoad:function(t){var i=this;this.token=this.getGlobalAccessToken(),this.id=t.id,this.name=t.name,this.mobile=t.mobile,this.user_name=t.user_name,this.status=t.status,null!=this.token&&this.searchFollow(),uni.request({url:this.serverUrl+"customer-industry-and-source",header:{Authorization:this.token,Accept:"application/json"},method:"GET",success:function(t){if(200==t.data.code)for(var e in t.data.data.source)i.type.push(t.data.data.source[e]);else uni.showToast({title:t.data.message,image:"../../static/icons/warning.png"})}})},methods:{typeSelect:function(t){this.type_index=t.detail.value},bindDateChange:function(t){this.date=t.detail.value},bindTimeChange:function(t){this.time=t.detail.value},call:function(){var t=this;uni.showModal({title:"拨打电话",content:"拨打电话给 "+this.mobile,showCancel:!0,confirmText:"确定",success:function(i){i.confirm?(console.log("用户点击确定"),uni.request({url:t.serverUrl+"call-mobile/"+t.id,header:{Authorization:t.token,Accept:"application/json"},method:"GET",success:function(t){uni.hideLoading(),200==t.data.code?uni.showToast({title:t.data.data,image:"../../static/icons/success.png"}):401==t.data.code?uni.showToast({title:t.data.message,image:"../../static/icons/warning.png"}):422==t.data.code?uni.showToast({title:t.data.message,image:"../../static/icons/warning.png"}):429==t.data.code?uni.showToast({title:t.data.message,image:"../../static/icons/warning.png"}):uni.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(t){t.confirm&&uni.reLaunch({url:"../registLogin/registLogin"})}})}})):i.cancel&&console.log("用户点击取消")}})},customerEnd:function(){var t=this;1!=this.customer&&uni.showModal({title:"结束拜访",content:"结束拜访后无法再次开启",showCancel:!0,confirmText:"确定",success:function(i){i.confirm?(console.log("用户点击确定"),uni.showLoading({title:"加载中"}),uni.request({url:t.serverUrl+"customer-end/"+t.id,header:{Authorization:t.token,Accept:"application/json"},method:"GET",success:function(i){uni.hideLoading(),200==i.data.code?(t.customer.status=1,uni.showToast({title:"已结束",image:"../../static/icons/success.png"})):422==i.data.code?uni.showToast({title:i.data.message,image:"../../static/icons/warning.png"}):429==i.data.code?uni.showToast({title:i.data.message,image:"../../static/icons/warning.png"}):uni.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(t){t.confirm&&uni.reLaunch({url:"../registLogin/registLogin"})}})}})):i.cancel&&console.log("用户点击取消")}})},orderBy:function(){this.order=this.order?0:1,this.searchFollow()},searchFollow:function(){var t=this;uni.request({url:this.serverUrl+"follow-list/"+this.id+"/"+this.order,header:{Authorization:this.token,Accept:"application/json"},method:"GET",success:function(i){200==i.data.code?(t.follow_list=i.data.data.follows,t.customer=i.data.data.customer):422==i.data.code?uni.showToast({title:i.data.message,image:"../../static/icons/warning.png"}):429==i.data.code?uni.showToast({title:i.data.message,image:"../../static/icons/warning.png"}):uni.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(t){t.confirm&&uni.reLaunch({url:"../registLogin/registLogin"})}})}})},formSubmit:function(){var t=this;0==this.type_index?uni.showToast({title:"请选择类型",image:"../../static/icons/warning.png"}):(uni.showLoading({title:"加载中"}),uni.request({url:this.serverUrl+"follow",header:{Authorization:this.token,Accept:"application/json"},data:{customer_id:this.id,type:this.type_index,date:this.date,time:this.time,remark:this.remark,order:this.order},method:"POST",success:function(i){uni.hideLoading(),200==i.data.code?(t.follow_list.unshift(i.data.data),t.type_index=0,t.remark="",uni.showToast({title:"保存成功",image:"../../static/icons/success.png"})):422==i.data.code?uni.showToast({title:i.data.message,image:"../../static/icons/warning.png"}):429==i.data.code?uni.showToast({title:i.data.message,image:"../../static/icons/warning.png"}):uni.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",showCancel:!1,success:function(t){t.confirm&&uni.reLaunch({url:"../registLogin/registLogin"})}})}}))},getDate:function(t){var i=new Date,e=i.getFullYear(),a=i.getMonth()+1,s=i.getDate();return"start"===t?e-=60:"end"===t&&(e+=2),a=a>9?a:"0"+a,s=s>9?s:"0"+s,"".concat(e,"-").concat(a,"-").concat(s)}}};i.default=a},"757f":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,"uni-page-body[data-v-666702c1]{background-color:#f4f4f4;height:100%}.body[data-v-666702c1]{background-color:#f4f4f4;padding-top:0}.top-user-card[data-v-666702c1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-left:%?-35?%;margin-right:%?-35?%;padding:%?66?% %?35?% 0 %?35?%;background-color:#fff}.top-user-card .avatar uni-image[data-v-666702c1]{width:%?80?%;height:%?80?%;border-radius:50%;background-color:#f4f4f4;padding:%?30?%;margin-right:%?20?%}.top-user-card .avatar-right[data-v-666702c1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;padding:%?15?% 0}.top-user-card .top-title[data-v-666702c1]{font-size:%?36?%;color:#222;margin-bottom:%?25?%;font-weight:700}.top-user-card .bottom-title[data-v-666702c1]{font-size:%?28?%;color:#666;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.top-user-card .bottom-title span[data-v-666702c1]:first-child{margin-right:%?30?%}.visit-form[data-v-666702c1]{border-radius:%?16?%;background-color:#fff;margin-top:%?35?%;padding:0 %?24?%}.form-group[data-v-666702c1]{font-size:%?30?%;color:#222;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:%?40?% 0;border-bottom:1px solid #eaeaea}.user-card[data-v-666702c1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:%?38?% 0;border-top:1px solid #eaeaea}.user-card-title[data-v-666702c1]{padding:%?40?% 0}.user-card .title[data-v-666702c1]{font-size:%?32?%;color:#222}.user-card .avatar uni-image[data-v-666702c1]{width:%?60?%;height:%?60?%;border-radius:50%;background-color:#f4f4f4;padding:%?20?%;margin-right:%?20?%}.user-card .avatar-right[data-v-666702c1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%}.user-card .top-title[data-v-666702c1]{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;font-size:%?32?%;color:#222;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:%?20?%}.user-card .bottom-title[data-v-666702c1]{font-size:%?24?%;color:#666;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.box-picker[data-v-666702c1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}.box-picker uni-picker[data-v-666702c1]{width:100%;margin-right:%?40?%}.box-picker uni-picker .uni-input[data-v-666702c1]{float:right}.box-picker uni-image[data-v-666702c1]{width:%?30?%;height:%?30?%;top:50%;right:0;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);position:absolute}.form-button[data-v-666702c1]{border:#2c405a;border-radius:%?100?%;padding:%?12?% 0;font-size:%?30?%;background-color:#ddd;color:#fff}.form-button[data-v-666702c1]:after{width:0;height:0}.form-button-active[data-v-666702c1]{background-color:#008eff!important}.visit-form-first[data-v-666702c1]{padding-bottom:%?40?%}.uni-textarea[data-v-666702c1],.uni-textarea uni-textarea[data-v-666702c1]{height:%?180?%}.content-by-mobile[data-v-666702c1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.bottom-title uni-image[data-v-666702c1]{width:%?40?%;height:%?40?%}.end-button[data-v-666702c1]{border:1px solid #22ac38;border-radius:%?100?%;background-color:#fff;color:#22ac38;font-size:%?24?%;line-height:unset;padding:0 %?10?%}.user-card-title[data-v-666702c1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.user-card-title uni-image[data-v-666702c1]{width:%?40?%;height:%?40?%}body.?%PAGE?%[data-v-666702c1]{background-color:#f4f4f4}",""])},b1fd:function(t,i,e){"use strict";e.r(i);var a=e("b576"),s=e("e06f");for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);e("b66b");var o=e("2877"),c=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,"666702c1",null);i["default"]=c.exports},b576:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"body"},[e("v-uni-view",{staticClass:"top-user-card"},[e("v-uni-view",{staticClass:"avatar"},[e("v-uni-image",{attrs:{src:"../../static/icons/lianxiren@3x.png"}})],1),e("v-uni-view",{staticClass:"avatar-right"},[e("v-uni-view",{staticClass:"top-title"},[e("span",[t._v(t._s(t.name))])]),e("v-uni-view",{staticClass:"bottom-title"},[e("span",[t._v("负责人："+t._s(t.user_name))]),e("v-uni-view",{staticClass:"content-by-mobile",on:{click:function(i){i=t.$handleEvent(i),t.call(i)}}},[e("v-uni-image",{attrs:{src:"../../static/icons/mobile.png"}}),e("span",[t._v("："+t._s(t.mobile))])],1)],1),e("v-uni-view",{staticClass:"bottom-title",staticStyle:{"margin-top":"30upx","margin-bottom":"20upx",display:"flex","justify-content":"space-between"}},[e("span",[t._v("状态："+t._s(t.status_name[t.customer.status]))]),1!=t.customer.status?e("span",{staticClass:"end-button",on:{click:function(i){i=t.$handleEvent(i),t.customerEnd(i)}}},[t._v("结束拜访")]):t._e()])],1)],1),e("v-uni-view",{staticClass:"body-follow"},[1!=t.customer.status?e("v-uni-view",{staticClass:"visit-form visit-form-first"},[e("v-uni-view",{staticClass:"form-group"},[e("v-uni-label",[t._v("记录类型")]),e("v-uni-view",{staticClass:"box-picker"},[e("v-uni-picker",{attrs:{mode:"selector",range:t.type},on:{change:function(i){i=t.$handleEvent(i),t.typeSelect(i)}}},[e("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.type[t.type_index]))])],1),e("v-uni-image",{attrs:{src:"../../static/icons/xiangqing@3x.png"}})],1)],1),e("v-uni-view",{staticClass:"form-group"},[e("v-uni-label",[t._v("重访日期")]),e("v-uni-view",{staticClass:"box-picker"},[e("v-uni-picker",{attrs:{mode:"date",value:t.date},on:{change:function(i){i=t.$handleEvent(i),t.bindDateChange(i)}}},[e("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.date))])],1),e("v-uni-image",{attrs:{src:"../../static/icons/xiangqing@3x.png"}})],1)],1),e("v-uni-view",{staticClass:"form-group"},[e("v-uni-label",[t._v("重访时间")]),e("v-uni-view",{staticClass:"box-picker"},[e("v-uni-picker",{attrs:{mode:"time",value:t.time},on:{change:function(i){i=t.$handleEvent(i),t.bindTimeChange(i)}}},[e("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.time))])],1),e("v-uni-image",{attrs:{src:"../../static/icons/xiangqing@3x.png"}})],1)],1),e("v-uni-view",{staticClass:"form-group",staticStyle:{"border-bottom":"0"}},[e("v-uni-view",{staticClass:"box-picker"},[e("v-uni-view",{staticClass:"uni-textarea"},[e("v-uni-textarea",{attrs:{placeholder:"备注"},model:{value:t.remark,callback:function(i){t.remark=i},expression:"remark"}})],1)],1)],1),e("v-uni-button",{staticClass:"form-button form-button-active",on:{click:function(i){i=t.$handleEvent(i),t.formSubmit(i)}}},[t._v("盯一下")])],1):t._e(),e("v-uni-view",{staticClass:"visit-form"},[e("v-uni-view",{staticClass:"user-card user-card-title",staticStyle:{border:"0"}},[e("span",{staticClass:"title"},[t._v("跟进记录")]),t.follow_list.length>1?e("v-uni-view",{on:{click:function(i){i=t.$handleEvent(i),t.orderBy(i)}}},[1==t.order?e("v-uni-image",{attrs:{src:"../../static/icons/down.png"}}):t._e(),0==t.order?e("v-uni-image",{attrs:{src:"../../static/icons/up.png"}}):t._e()],1):t._e()],1),t.follow_list.length?e("v-uni-view",t._l(t.follow_list,function(i){return e("v-uni-view",{staticClass:"user-card"},[e("v-uni-view",{staticClass:"avatar"},[e("v-uni-image",{attrs:{src:"../../static/icons/lianxiren@3x.png"}})],1),e("v-uni-view",{staticClass:"avatar-right"},[e("v-uni-view",{staticClass:"top-title"},[e("v-uni-navigator",{attrs:{url:"../followEdit/followEdit?id="+i.id}},[e("span",[t._v(t._s(t.user_name))])])],1),e("v-uni-view",{staticClass:"bottom-title"},[e("span",[t._v(t._s(t.type[i.type]))]),e("span",[t._v(t._s(i.visited_at))])])],1)],1)}),1):e("v-uni-view",{staticStyle:{"padding-bottom":"40upx","min-height":"200upx",display:"flex","align-items":"center","justify-content":"center",color:"#D9D9D9","font-size":"35upx"}},[t._v("暂无记录")])],1)],1)],1)},s=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})},b66b:function(t,i,e){"use strict";var a=e("05ba"),s=e.n(a);s.a},e06f:function(t,i,e){"use strict";e.r(i);var a=e("426e"),s=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);i["default"]=s.a}}]);